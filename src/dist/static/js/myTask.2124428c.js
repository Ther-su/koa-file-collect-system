(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["myTask"],{"13cf":function(e,t,n){var r=n("9ba3"),a=n("994c"),i="["+a+"]",s=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),u=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(s,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:u(1),end:u(2),trim:u(3)}},1427:function(e,t,n){e.exports=n.p+"static/img/empty.3427ed28.png"},"1e6a":function(e,t,n){var r=n("6921"),a=n("60ce").f,i=Function.prototype,s=i.toString,o=/^\s*function ([^ (]*)/,u="name";r&&!(u in i)&&a(i,u,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(e){return""}}})},2181:function(e,t,n){"use strict";var r=n("165d").charAt,a=n("7acd"),i=n("c0ba"),s="String Iterator",o=a.set,u=a.getterFor(s);i(String,"String",(function(e){o(this,{type:s,string:String(e),index:0})}),(function(){var e,t=u(this),n=t.string,a=t.index;return a>=n.length?{value:void 0,done:!0}:(e=r(n,a),t.index+=e.length,{value:e,done:!1})}))},3098:function(e,t,n){"use strict";var r=n("bbcf"),a=n("6921"),i=n("4c16"),s=n("631e"),o=n("2fb1"),u=n("60ce").f,c=n("7e26"),l=i.Symbol;if(a&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new l(e):void 0===e?l():l(e);return""===e&&(f[t]=!0),t};c(d,l);var p=d.prototype=l.prototype;p.constructor=d;var h=p.toString,g="Symbol(test)"==String(l("test")),m=/^Symbol\((.*)\)[^)]+$/;u(p,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=h.call(e);if(s(f,e))return"";var n=g?t.slice(7,-1):t.replace(m,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:d})}},"3ced":function(e,t,n){"use strict";var r=n("bbcf"),a=n("285a"),i=n("7989"),s=n("0c4f"),o=n("e4bd"),u=1..toFixed,c=Math.floor,l=function(e,t,n){return 0===t?n:t%2===1?l(e,t-1,n*e):l(e*e,t/2,n)},f=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},d=u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){u.call({})}));r({target:"Number",proto:!0,forced:d},{toFixed:function(e){var t,n,r,o,u=i(this),d=a(e),p=[0,0,0,0,0,0],h="",g="0",m=function(e,t){var n=-1,r=t;while(++n<6)r+=e*p[n],p[n]=r%1e7,r=c(r/1e7)},v=function(e){var t=6,n=0;while(--t>=0)n+=p[t],p[t]=c(n/e),n=n%e*1e7},b=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==p[e]){var n=String(p[e]);t=""===t?n:t+s.call("0",7-n.length)+n}return t};if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(h="-",u=-u),u>1e-21)if(t=f(u*l(2,69,1))-69,n=t<0?u*l(2,-t,1):u/l(2,t,1),n*=4503599627370496,t=52-t,t>0){m(0,n),r=d;while(r>=7)m(1e7,0),r-=7;m(l(10,r,1),0),r=t-1;while(r>=23)v(1<<23),r-=23;v(1<<r),m(1,1),v(2),g=b()}else m(0,n),m(1<<-t,0),g=b()+s.call("0",d);return d>0?(o=g.length,g=h+(o<=d?"0."+s.call("0",d-o)+g:g.slice(0,o-d)+"."+g.slice(o-d))):g=h+g,g}})},"3e68":function(e,t,n){var r=n("bbcf"),a=n("fa18"),i=n("9997"),s=!i((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:s},{from:a})},"4c09":function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){if(Array.isArray(e))return r(e)}n.d(t,"a",(function(){return u}));n("f869"),n("3098"),n("eb14"),n("3e68"),n("4d20"),n("2181"),n("659e");function i(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n("eb27"),n("1e6a"),n("8d56");function s(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){return a(e)||i(e)||s(e)||o()}},"65ba":function(e,t,n){"use strict";var r=n("6921"),a=n("4c16"),i=n("adc7"),s=n("58e4"),o=n("631e"),u=n("40e6"),c=n("d922"),l=n("6a27"),f=n("e4bd"),d=n("4035"),p=n("889a").f,h=n("37cb").f,g=n("60ce").f,m=n("13cf").trim,v="Number",b=a[v],k=b.prototype,y=u(d(k))==v,w=function(e){var t,n,r,a,i,s,o,u,c=l(e,!1);if("string"==typeof c&&c.length>2)if(c=m(c),t=c.charCodeAt(0),43===t||45===t){if(n=c.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+c}for(i=c.slice(2),s=i.length,o=0;o<s;o++)if(u=i.charCodeAt(o),u<48||u>a)return NaN;return parseInt(i,r)}return+c};if(i(v,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var F,x=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof x&&(y?f((function(){k.valueOf.call(n)})):u(n)!=v)?c(new b(w(t)),n,x):w(t)},I=r?p(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),S=0;I.length>S;S++)o(b,F=I[S])&&!o(x,F)&&g(x,F,h(b,F));x.prototype=k,k.constructor=x,s(a,v,x)}},"72cd":function(e,t,n){"use strict";var r=n("bbcf"),a=n("0ecc").some,i=n("c534"),s=n("e9a9"),o=i("some"),u=s("some");r({target:"Array",proto:!0,forced:!o||!u},{some:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},7989:function(e,t,n){var r=n("40e6");e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},8920:function(e,t,n){},"8d56":function(e,t,n){"use strict";var r=n("58e4"),a=n("708d"),i=n("e4bd"),s=n("ec1d"),o="toString",u=RegExp.prototype,c=u[o],l=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),f=c.name!=o;(l||f)&&r(RegExp.prototype,o,(function(){var e=a(this),t=String(e.source),n=e.flags,r=String(void 0===n&&e instanceof RegExp&&!("flags"in u)?s.call(e):n);return"/"+t+"/"+r}),{unsafe:!0})},"994c":function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},a03d:function(e,t,n){"use strict";n("8920")},b199:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"j",(function(){return u})),n.d(t,"i",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return f})),n.d(t,"f",(function(){return d})),n.d(t,"k",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return g}));var r=n("d211"),a=n("b775");function i(e){return Object(a["a"])({url:"/task/add",method:"post",data:e})}function s(e){return Object(a["a"])(Object(r["a"])({url:"/task/my",method:"get"},e))}function o(e){return Object(a["a"])(Object(r["a"])({url:"/task/published",method:"get"},e))}function u(e){return Object(a["a"])({url:"/task/pic",method:"post",data:e})}function c(e,t){return Object(a["a"])(Object(r["a"])({url:"/task/fileChunk",method:"post",data:e},t))}function l(e,t){return Object(a["a"])(Object(r["a"])({url:"/task/fileMerge",method:"post",data:e},t))}function f(e){return Object(a["a"])({url:"/task/presence",method:"post",data:e})}function d(e){return Object(a["a"])(Object(r["a"])({url:"/task/submitSituation",method:"get"},e))}function p(e){return Object(a["a"])({url:"/task/update",method:"put",data:e})}function h(e){return Object(a["a"])(Object(r["a"])({url:"/task/download",method:"get",responseType:"blob"},e))}function g(e){return Object(a["a"])({url:"/task/delete",method:"put",data:e})}},d922:function(e,t,n){var r=n("2fb1"),a=n("7bc8");e.exports=function(e,t,n){var i,s;return a&&"function"==typeof(i=t.constructor)&&i!==n&&r(s=i.prototype)&&s!==n.prototype&&a(e,s),e}},eb14:function(e,t,n){var r=n("41ba");r("iterator")},eb27:function(e,t,n){"use strict";var r=n("bbcf"),a=n("2fb1"),i=n("ec82"),s=n("5501"),o=n("5152"),u=n("e855"),c=n("7389"),l=n("19d6"),f=n("780c"),d=n("e9a9"),p=f("slice"),h=d("slice",{ACCESSORS:!0,0:0,1:2}),g=l("species"),m=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!p||!h},{slice:function(e,t){var n,r,l,f=u(this),d=o(f.length),p=s(e,d),h=s(void 0===t?d:t,d);if(i(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?a(n)&&(n=n[g],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return m.call(f,p,h);for(r=new(void 0===n?Array:n)(v(h-p,0)),l=0;p<h;p++,l++)p in f&&c(r,l,f[p]);return r.length=l,r}})},f719:function(e,t,n){var r=n("708d"),a=n("9cc0");e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(s){throw a(e),s}}},fa18:function(e,t,n){"use strict";var r=n("9d80"),a=n("529d"),i=n("f719"),s=n("5a4f"),o=n("5152"),u=n("7389"),c=n("8fcf");e.exports=function(e){var t,n,l,f,d,p,h=a(e),g="function"==typeof this?this:Array,m=arguments.length,v=m>1?arguments[1]:void 0,b=void 0!==v,k=c(h),y=0;if(b&&(v=r(v,m>2?arguments[2]:void 0,2)),void 0==k||g==Array&&s(k))for(t=o(h.length),n=new g(t);t>y;y++)p=b?v(h[y],y):h[y],u(n,y,p);else for(f=k.call(h),d=f.next,n=new g;!(l=d.call(f)).done;y++)p=b?i(f,v,[l.value,y],!0):l.value,u(n,y,p);return n.length=y,n}},fe26:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"my-task-container"},[e.myTasks.length>0?r("el-timeline",e._l(e.myTasks,(function(t){return r("el-timeline-item",{key:t.id,attrs:{timestamp:e._f("dateFormat")(t.publishTime),placement:"top"}},[r("el-card",[r("el-collapse",{attrs:{accordion:""}},[r("el-collapse-item",[r("template",{slot:"title"},[r("div",{staticClass:"title-box"},[r("h3",[e._v(e._s(t.taskName))]),r("div",{staticClass:"tip-box"},[r("el-tooltip",{attrs:{effect:"dark",content:"截止日期",placement:"top-start"}},[r("el-tag",{attrs:{type:"danger",effect:"dark"}},[e._v(e._s(e._f("dateFormat")(t.deadline)))])],1),r("el-tooltip",{attrs:{effect:"dark",content:"作业状态",placement:"top-start"}},[r("el-tag",{attrs:{type:e._f("statusTagFormat")(t.status)}},[e._v(e._s(e._f("statusFormat")(t.status)))])],1)],1)])]),r("div",{staticClass:"content-box",domProps:{innerHTML:e._s(t.taskContent)}}),r("el-button",{staticClass:"submit-btn",attrs:{size:"small",type:"primary",disabled:t.uploadFile&&"wait"!==t.uploadFile.status}},[r("i",{staticClass:"el-icon-upload2 el-icon--left",attrs:{size:"mini"}}),e._v("选择文件 "),t.uploadFile&&"wait"!==t.uploadFile.status?e._e():r("input",{ref:"input",refInFor:!0,staticClass:"select-file-input",attrs:{type:"file",multiple:!1,"οnclick":"f.outerHTML=f.outerHTML"},on:{change:function(n){return e.handleFileChange(n,t.taskId)}}})]),r("el-button",{attrs:{size:"small",type:"success",disabled:!t.uploadFile||"wait"!==t.uploadFile.status},on:{click:function(n){return e.handleUpload(t)}}},[r("i",{staticClass:"el-icon-upload el-icon--left",attrs:{size:"mini"}}),e._v(" 上传文件 ")]),r("el-button",{attrs:{type:"danger",size:"small",disabled:!t.uploadFile||"uploading"!==t.uploadFile.status},on:{click:function(n){return e.handlePause(t)}}},[r("i",{staticClass:"el-icon-video-pause el-icon--left",attrs:{size:"mini"}}),e._v("暂停 ")]),r("el-button",{attrs:{type:"warning",size:"small",disabled:!t.uploadFile||"pause"!==t.uploadFile.status},on:{click:function(n){return e.handleResume(t)}}},[r("i",{staticClass:"el-icon-video-play el-icon--left",attrs:{size:"mini"}}),e._v("恢复 ")]),r("el-button",{attrs:{type:"info",size:"small",disabled:!t.uploadFile},on:{click:function(n){return e.clearFiles(t)}}},[r("i",{staticClass:"el-icon-delete el-icon--left",attrs:{size:"mini"}}),e._v("清空 ")]),t.uploadFile?r("div",{staticClass:"upload-info-box"},[r("div",{staticClass:"name-box"},[e._v(e._s(t.uploadFile.name))]),r("div",{staticClass:"size-box"},[e._v(e._s(e._f("transformByte")(t.uploadFile.size)))]),"hashing"===t.uploadFile.status||"wait"===t.uploadFile.status?r("div",{staticClass:"progress-box"},[r("span",[e._v(e._s("wait"===t.uploadFile.status?"准备读取文件":"正在读取文件"))]),r("el-progress",{attrs:{percentage:t.uploadFile.hashProgress}})],1):r("div",{staticClass:"progress-box"},[r("span",[e._v("文件进度")]),r("el-progress",{attrs:{percentage:t.uploadFile.uploadProgress}})],1)]):e._e()],2)],1)],1)],1)})),1):r("div",{staticClass:"no-content-box"},[r("el-image",{attrs:{src:n("1427")}}),e._v(" 这里还空空如也~ ")],1),r("el-pagination",{attrs:{small:"",background:"",layout:"total, sizes, prev, pager, next","page-sizes":[3,5,8,10],"page-size":e.queryInfo.pageSize,"current-page":e.queryInfo.pageNum,total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},a=[],i=(n("51d7"),n("3f4b"),n("4318"),n("957b"),n("4538"),n("eb27"),n("72cd"),n("1e6a"),n("65ba"),n("3ced"),n("4d20"),n("2e4f"),n("4c09")),s=(n("6a61"),n("2e91")),o=n("73ef");function u(e){var t=window.localStorage.getItem(e);return!(!t||"undefined"===t)&&JSON.parse(t)}function c(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function l(e){window.localStorage.removeItem(e)}var f=n("b199"),d={wait:"wait",hashing:"hashing",uploading:"uploading",success:"success",error:"error",pause:"pause",resume:"resume"},p=10485760,h={name:"myTask",filters:{transformByte:function(e){if(!e)return"0B";var t=1024;return e<t?e+"B":e<Math.pow(t,2)?(e/t).toFixed(2)+"K":e<Math.pow(t,3)?(e/Math.pow(t,2)).toFixed(2)+"M":e<Math.pow(t,4)?(e/Math.pow(t,3)).toFixed(2)+"G":(e/Math.pow(t,4)).toFixed(2)+"T"}},data:function(){return{tempThreads:3,worker:null,cancels:[],myTasks:[],count:0,queryInfo:{pageSize:3,pageNum:1}}},methods:{handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getMyTask()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getMyTask()},handleFileChange:function(e,t){var n=e.target.files;if(!n.length)return null;var r=Array.prototype.slice.call(n),a=r[0];a.status=d.wait,a.chunkList=[],a.uploadProgress=0,a.fakeUploadProgress=0,a.hashProgress=0,a.taskId=t,this.setUploadFile(a,t)},verifyUpload:function(e,t,n){return new Promise((function(r){var a={hash:t,fileName:e,taskId:n,submitTime:new Date};Object(f["h"])(a).then((function(e){r(e.data)})).catch((function(e){console.log(e)}))}))},createFileChunk:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,n=[],r=0;while(r<e.size)n.push({file:e.slice(r,r+t)}),r+=t;return n},handleUpload:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,i,s,o,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.uploadFile,n.prev=1,a=r.taskId,i=t.createFileChunk(r),"resume"===r.status){n.next=9;break}return r.status=d.hashing,n.next=8,t.calculateHash({uploadFile:r,taskId:a});case 8:r.hash=n.sent;case 9:return n.next=11,t.verifyUpload(r.name,r.hash,r.taskId);case 11:if(s=n.sent,o=s.presence,!o){n.next=19;break}r.status=d.secondPass,r.uploadProgress=100,t.setUploadFile(r,a),n.next=26;break;case 19:return r.status=d.uploading,u=t.getChunkStorage(r.hash),r.fileHash=r.hash,r.chunkList=i.map((function(e,t){var n=e.file;return{fileHash:r.hash,fileName:r.name,index:t,hash:r.hash+"-"+t,chunk:n,taskId:a,size:n.size,uploaded:u&&u.includes(t),progress:u&&u.includes(t)?100:0,status:u&&u.includes(t)?"success":"wait"}})),t.setUploadFile(r,a),n.next=26,t.uploadChunks(r);case 26:n.next=31;break;case 28:n.prev=28,n.t0=n["catch"](1),console.log(n.t0);case 31:case"end":return n.stop()}}),n,null,[[1,28]])})))()},calculateHash:function(e){var t=this,n=e.uploadFile,r=e.taskId;return new Promise((function(e){t.worker=new Worker("./hash.js"),t.worker.postMessage({uploadFile:n}),t.worker.onmessage=function(a){var i=a.data,s=i.percentage,o=i.hash;n.hashProgress=Number(s.toFixed(0)),t.setUploadFile(n,r),o&&e(o)}}))},uploadChunks:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.chunkList,n.abrupt("return",new Promise(function(){var n=Object(s["a"])(regeneratorRuntime.mark((function n(a,i){var s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=r.filter((function(e){var t=e.uploaded;return!t})).map((function(e){var t=e.fileHash,n=e.chunk,r=e.fileName,a=e.index,i=e.taskId,s=new FormData;return s.append("fileHash",t),s.append("file",n),s.append("chunkId",a),s.append("taskId",i),{formData:s,index:a,fileName:r}})),n.prev=1,n.next=4,t.sendRequest(s,r,e);case 4:n.next=10;break;case 6:return n.prev=6,n.t0=n["catch"](1),t.$message.error("亲 上传失败了,考虑重试下呦"),n.abrupt("return",null);case 10:if(o=r.some((function(e){return!1===e.uploaded})),!o){n.next=15;break}alert("存在失败的切片"),n.next=24;break;case 15:return n.prev=15,n.next=18,t.mergeRequest(e);case 18:a(),n.next=24;break;case 21:n.prev=21,n.t1=n["catch"](15),i(n.t1);case 24:case"end":return n.stop()}}),n,null,[[1,6],[15,21]])})));return function(e,t){return n.apply(this,arguments)}}()));case 2:case"end":return n.stop()}}),n)})))()},clearFiles:function(e){var t=e.uploadFile,n=t.taskId;this.setUploadFile(null,n),this.worker&&this.worker.terminate()},handlePause:function(e){var t=e.uploadFile,n=t.taskId;t.status=d.pause,t.fakeUploadProgress=t.uploadProgress;while(this.cancels.length>0)this.cancels.pop()("暂停上传");this.setUploadFile(t,n)},handleResume:function(e){var t=e.uploadFile;t.status=d.resume;var n=t.taskId;this.setUploadFile(t,n),this.handleUpload({uploadFile:t})},mergeRequest:function(e){var t=this;return new Promise((function(n,r){var a={taskId:e.taskId,fileHash:e.fileHash,fileName:e.name,fileChunkNum:e.chunkList.length,submitTime:new Date};Object(f["g"])(a,{timeout:0}).then((function(r){0===r.code?(e.status=d.success,t.setUploadFile(e,e.taskId),l(e.fileHash),t.$message({type:"success",message:"上传作业成功!"}),n()):(l(e.fileHash),e.status=d.error,t.setUploadFile(e,e.taskId),n())})).catch((function(t){e.status=d.error,r(t)}))}))},createProgresshandler:function(e,t){var n=this;return function(r){e.progress=parseInt(String(r.loaded/r.total*100)),n.fileProgress(t)}},fileProgress:function(e){var t=e,n=t.taskId;if(t){var r=t.chunkList.map((function(e){return e.size*e.progress})).reduce((function(e,t){return e+t})),a=parseInt((r/t.size).toFixed(2));t.fakeUploadProgress?a>t.fakeUploadProgress&&(t.uploadProgress=a,this.setUploadFile(t,n)):(t.uploadProgress=a,this.setUploadFile(t,n))}},sendRequest:function(e,t,n){var r=this,a=0,i=e.length,s=this,u=[];return new Promise((function(c,l){for(var p=function p(){if(e.length){var h=e.shift(),g=h.formData,m=h.index;Object(f["i"])(g,{onUploadProgress:s.createProgresshandler(t[m],n),cancelToken:new o["CancelToken"]((function(e){return r.cancels.push(e)})),timeout:0}).then((function(e){t[m].uploaded=!0,t[m].status="success",r.addChunkStorage(t[m].fileHash,m),a++,p()})).catch((function(a){if(![d.pause,d.wait].includes(n.status)){if("number"!==typeof u[m]&&(u[m]=0),t[m].status="warning",u[m]++,u[m]>=r.chunkRetry)return console.warn(" 重试失败--- > handler -> retryArr",u,t[m].hash),l("重试失败",u);r.tempThreads++,e.push(h),p()}}))}a>=i&&c()},h=0;h<r.tempThreads;h++)p()}))},addChunkStorage:function(e,t){var n=[t],r=u(e);c(e,r?[].concat(Object(i["a"])(r),n):n)},getChunkStorage:function(e){return u(e)},getMyTask:function(){var e=this;Object(f["d"])({params:this.queryInfo}).then((function(t){var n=t.data;e.myTasks=n.taskList,e.count=n.count})).catch((function(e){console.log(e)}))},setUploadFile:function(e,t){var n=-1,r=this.myTasks.filter((function(e,r){return e.taskId===t&&(n=r,!0)}))[0];r.uploadFile=e,this.$set(this.myTasks,n,r)}},created:function(){this.getMyTask()}},g=h,m=(n("a03d"),n("5d22")),v=Object(m["a"])(g,r,a,!1,null,"21f74e47",null);t["default"]=v.exports}}]);